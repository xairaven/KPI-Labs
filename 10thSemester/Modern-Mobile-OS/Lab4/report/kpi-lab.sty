\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{kpi-lab}[KPI Lab Report Style]

% Packages
\usepackage{caption}
\usepackage{datetime2}
\usepackage{enumitem}
\usepackage{fancyhdr}
\usepackage{fancyvrb}
\usepackage{float}
\usepackage{fontspec}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{hyphenat}
\usepackage{indentfirst}
\usepackage{setspace}
\usepackage{titlesec}
\usepackage{unicode-math}
\usepackage{xcolor}
% Code
\usepackage[outputdir=build]{minted}
% Languages
\usepackage[english, ukrainian]{babel}

% Fonts
\defaultfontfeatures{Ligatures=TeX}
\setmainfont{Times New Roman}
\setmathfont{Latin Modern Math}
\setsansfont{Arial}
\setmonofont[Scale=0.8]{DejaVu Sans Mono}

% Spaces, idents, etc.
\tolerance=300
\emergencystretch=3em
\hfuzz=0.5pt
\frenchspacing
\sloppy

% Geometry
\graphicspath{{./images/}}
\geometry{
	a4paper,
	left=25mm,
	right=10mm,
	top=15mm,
	bottom=15mm
}
\onehalfspacing % 1.5 Interval
\setlength{\parindent}{1.25cm} % Paragraph Indent
\fvset{tabsize=4, showtabs=false}

% Headings
\titleformat{\section}[block]
{\centering\bfseries\normalsize}
{}
{0pt}
{}
\titlespacing*{\section}{0pt}{12pt}{6pt}


\titleformat{\subsection}[runin]
{\bfseries\normalsize}
{}
{0pt}
{}[.~]
\titlespacing{\subsection}{\parindent}{6pt}{5pt}

% Headers & Footers
\pagestyle{fancy}
\fancyhf{}
\renewcommand\headrulewidth{0pt}
\cfoot{\thepage}
\setlength{\headheight}{18pt}

% Lists
\setlist{
	itemsep=0.0\baselineskip,
	leftmargin=1.25cm,
	labelsep=0.5cm,
	listparindent=1.25cm,
	parsep=0pt,
	partopsep=0pt,
	topsep=0pt
}

% Hyperlinks
\definecolor{darkblue}{rgb}{0.0,0.0,0.5}
\hypersetup{
	unicode=true,
	colorlinks=true,
	linkcolor=darkblue,
	urlcolor=darkblue,
	filecolor=darkblue
}

% Code styles
\usemintedstyle{vs}
\XeTeXinputnormalization=1
\definecolor{linecolor}{rgb}{0.6,0.6,0.6}
\setminted{
	fontsize=\footnotesize,
	baselinestretch=1,
	linenos,
	breaklines,
	autogobble,
	obeytabs=false,
	tabsize=4,
	% Style
	frame=leftline,
	framerule=1pt,
	rulecolor=\color{linecolor},
	xleftmargin=15pt,
	framesep=10pt
}

% My own commands
% - Data rebinding
\DTMnewdatestyle{dotteddate}{%
	\renewcommand{\DTMdisplaydate}[4]{%
		\DTMtwodigits{##3}.\DTMtwodigits{##2}.##1%
	}%
	\renewcommand{\DTMdisplayzone}[2]{}%
}
\DTMsetdatestyle{dotteddate}

% Inserting images: \myimg[width]{height}{filename}
\newcommand{\image}[3][]{%
	\begin{figure}[H]
		\centering
		% Is width provided? (first argument is not empty)
		\if\relax\detokenize{#1}\relax
		\includegraphics[height=#2]{#3}
		\else
		\includegraphics[height=#2, #1]{#3}
		\fi
	\end{figure}
}
